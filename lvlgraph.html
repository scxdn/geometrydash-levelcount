<!--extremely old and shitty code i lazily repurposed pls dont judge me-->
<head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/numeral.js/2.0.6/numeral.min.js"></script>
</head>

<style>
    #chart{
        background-color: transparent;
    }
</style>
<script src="https://code.highcharts.com/stock/10.3.0/highstock.js"></script>
<button id="clear" onclick="cleargraph()"></button>
<div id="chart"></div>

<script type="text/javascript">

           
var line = '#b3382c'
   chart = new Highcharts.chart({
chart: {
renderTo: 'chart',
type: 'spline',
zoomType: 'x',
backgroundColor: 'transparent',
plotBorderColor: 'transparent',
animation: false
},
title: {
text: ''
},
xAxis: {
type: 'datetime',
tickPixelInterval: 500,
gridLineColor: '#d9d9d9',
labels: {
style: {
    color: '#d9d9d9'
}
},
lineColor: '#ffffff',
minorGridLineColor: '#d9d9d9',
tickColor: '#ffffff',
title: {
style: {
    color: '#d9d9d9'
}
}
},
yAxis: {
title: {
text: ''
},
gridLineColor: 'transparent',
labels: {
style: {
    color: '#d9d9d9'
}
},
lineColor: '#d9d9d9',
minorGridLineColor: 'transparent',
tickColor: '#d9d9d9'
},
credits: {
enabled: false,
text: ""
},

series: [{
showInLegend: false,
name: '',
marker: { enabled: false },
color: '#ffffff',
lineColor: '#c76c6c',
lineWidth: 9
}]

});
    </script>	


<script type="text/javascript">
    var n = 0;
    function fetchdatas() {
         fetch('http://localhost:6969/').then(res => res.json()).then(data => {
            n = parseFloat(data.count);
        }); 
    }
 
    function render() {
            if (chart.series[0].points.length == 3600) chart.series[0].data[0].remove();
                chart.series[0].addPoint([Date.now(),parseFloat(n)])   
    }
    

  setInterval(() => {
      fetchdatas()
      render();
  }, 2000);


 setTimeout(() => {
   cleargraph()
 }, 5500);




function cleargraph() {
    var line = "#4169e1"

    chart = new Highcharts.chart({
chart: {
renderTo: 'chart',
type: 'spline',
zoomType: 'x',
backgroundColor: 'transparent',
plotBorderColor: 'transparent',
animation: false
},
title: {
text: ''
},
xAxis: {
type: 'datetime',
tickPixelInterval: 500,
gridLineColor: '#d9d9d9',
labels: {
style: {
    color: '#d9d9d9'
}
},
lineColor: '#ffffff',
minorGridLineColor: '#d9d9d9',
tickColor: '#ffffff',
title: {
style: {
    color: '#d9d9d9'
}
}
},
yAxis: {
title: {
text: ''
},
gridLineColor: 'transparent',
labels: {
style: {
    color: '#d9d9d9'
}
},
lineColor: '#d9d9d9',
minorGridLineColor: 'transparent',
tickColor: '#d9d9d9'
},
credits: {
enabled: false,
text: ""
},

series: [{
showInLegend: false,
name: '',
marker: { enabled: false },
color: '#ffffff',
lineColor: '#c76c6c',
lineWidth: 5
}]

});

if (chart.series[0].points.length == 0) {
    console.log('Successfuly cleared the live chart!')
}
  
}
</script>